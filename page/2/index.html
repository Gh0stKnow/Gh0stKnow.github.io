<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="Xiaodong's Blog" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.png?v=5.1.0" />






<meta name="description" content="喜欢代码，喜欢设计">
<meta property="og:type" content="website">
<meta property="og:title" content="Xiaodong's Blog">
<meta property="og:url" content="http://godknow.cn/page/2/index.html">
<meta property="og:site_name" content="Xiaodong's Blog">
<meta property="og:description" content="喜欢代码，喜欢设计">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Xiaodong's Blog">
<meta name="twitter:description" content="喜欢代码，喜欢设计">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '3993343',
      author: '作者'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://godknow.cn/page/2/"/>





  <title> Xiaodong's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Xiaodong's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle">Talk is cheap, show me the code.</p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://godknow.cn/2016/07/13/swiftzhong-de-ke-xuan-lei-xing-he-qiang-zhi-jie-xi/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="晓东儿">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva4.sinaimg.cn/crop.0.0.511.511.180/72a5a039jw8f9d3gusrs1j20e80e7jrw.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Xiaodong's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Xiaodong's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/13/swiftzhong-de-ke-xuan-lei-xing-he-qiang-zhi-jie-xi/" itemprop="url">
                  Swift (?)可选类型和 (!)强制解包
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-13T15:00:33+08:00">
                2016-07-13
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/07/13/swiftzhong-de-ke-xuan-lei-xing-he-qiang-zhi-jie-xi/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/13/swiftzhong-de-ke-xuan-lei-xing-he-qiang-zhi-jie-xi/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>很多Swift初学者在学习过程中对问号和感叹号比较迷惑，<br>Swift中<strong>问号</strong>表示这是一个可选类型。<br>翻译：某个常量或者变量可能是一个类型，也可能什么都没有，<strong>我不确定它是否真的会有值，也许会是nil</strong>。</p>
<p>比如：</p>
<blockquote>
<p>let number1 = “123”</p>
<p>let number2 = number1.toInt()</p>
<p>//number2是Int?类型 或者叫optional Int</p>
</blockquote>
<p>number2，可能包含Int值，也可能什么都没有（那就是nil）</p>
<p>当我们通过if语句判断，number2确实有值时，可以使用<strong>感叹号</strong>来表示。</p>
<p>翻译：<strong>我确定这个可选类型的值内有正确的内容，请使用它</strong>。</p>
<blockquote>
<p>if number2 != nil {</p>
<pre><code>println(number2!)
</code></pre></blockquote>
<p>感叹号，被称为可选值的强制解析（无论如何请一定要使用这个值，我保证这里面肯定有东西）</p>
<p>然而在使用强制解析的时候，一定要确保包中的内容确实不会为 nil，<strong>否则会报错</strong>。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://godknow.cn/2016/07/12/ios-kai-fa-lu-xian/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="晓东儿">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva4.sinaimg.cn/crop.0.0.511.511.180/72a5a039jw8f9d3gusrs1j20e80e7jrw.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Xiaodong's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Xiaodong's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/12/ios-kai-fa-lu-xian/" itemprop="url">
                  iOS 开发路线
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-12T19:59:43+08:00">
                2016-07-12
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/07/12/ios-kai-fa-lu-xian/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/12/ios-kai-fa-lu-xian/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前言</p>
<p>学习iOS的人都想知道学习iOS需要学习哪些东西呢，本人搜集到github上有这么一个路径图，这里基本包含了开发中必须要掌握的一些技术知识。</p>
<p><img src="https://raw.githubusercontent.com/shaojiankui/iOS-Route/master/look.jpg" alt="预览图"></p>
<p><a href="http://ios.skyfox.org/route.html" target="_blank" rel="external">查看路线详情</a></p>
<p>来源<br><a href="https://github.com/shaojiankui/iOS-Route" target="_blank" rel="external">github地址iOS学习路线</a></p>
<p>此图片非本人所画，若原作者不允许使用此图，请及时告知，谢谢！</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://godknow.cn/2016/07/07/osshi-pin-zhi-bo-fang/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="晓东儿">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva4.sinaimg.cn/crop.0.0.511.511.180/72a5a039jw8f9d3gusrs1j20e80e7jrw.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Xiaodong's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Xiaodong's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/07/osshi-pin-zhi-bo-fang/" itemprop="url">
                  基于 ijkplayer 的iOS视频直播推流仿写
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-07T11:39:36+08:00">
                2016-07-07
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/07/07/osshi-pin-zhi-bo-fang/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/07/osshi-pin-zhi-bo-fang/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>视频直播，可以分为 采集，前处理，编码，传输, 服务器处理，解码，渲染</p>
<p>采集: iOS系统因为软硬件种类不多, 硬件适配性比较好, 所以比较简单. 而Android端市面上机型众多, 要做些机型的适配工作.PC端是最麻烦的, 各种奇葩摄像头驱动.所以现在很多的中小型直播平台, 都放弃了PC的直播, 更有一些直播平台只做iOS端的视频直播.</p>
<p>前处理: 美颜算法,视频的模糊效果, 水印等都是在这个环节做. 目前iOS端最著名开源框架的毫无疑问就是GPUImage.其中内置了125种渲染效果, 还支持各种脚本自定义. 我高仿的喵播的美颜效果也是基于GPUImage的.</p>
<p>编码: 重难点在于要在分辨率，帧率，码率，GOP等参数设计上找到最佳平衡点。iOS8之后, Apple开放了VideoToolbox.framework, 可以直接进行硬编解码, 这也是为什么现在大多数直播平台最低只支持到iOS8的原因之一. iOS端硬件兼容性比较好, 可以直接采取硬编码. 而Android得硬编码又是一大坑.</p>
<p>传输: 这块一般都是交给CDN服务商. CDN只提供带宽和服务器之间的传输, 发送端和接收端的网络连接抖动缓存还是要自己实现的.目前国内最大的CDN服务商应该是网宿.</p>
<p>服务器处理: 需要在服务器做一些流处理工作, 让推送上来的流适配各个平台各种不同的协议, 比如:RTMP,HLS,FLV…</p>
<p>解码和渲染: 也就即音视频的播放. 解码毫无疑问也必须要硬解码. iOS端兼容较好, Android依然大坑.这块的难点在于音画同步, 目前很多直播平台这块是硬伤.国内比较好的开源项目应该是B站开源的ijkplayer . 斗鱼就是基于ijkplayer 的, 本项目也是基于ijkplayer 的.</p>
<p>技术坑 : 降噪, 音频解码器, 蓝牙适配, 回声消除, 信令控制, 登录, 鉴权, 权限管理, 状态管理, 应用消息, 消息推送, 礼物系统, 即时聊天, 支付系统, 统计系统, 数据库, 缓存, 分布式文件存储, 消息队列, 运维系统等等大小不一的坑等你来填!!!</p>
          <!--noindex-->
          <div class="post-more-link text-center">
            <a class="btn" href="/2016/07/07/osshi-pin-zhi-bo-fang/#more" rel="contents">
              阅读全文 &raquo;
            </a>
          </div>
          <!--/noindex-->
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://godknow.cn/2016/07/03/lai-zi-linkedin-de-swift-bian-cheng-feng-ge-zhi-nan/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="晓东儿">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva4.sinaimg.cn/crop.0.0.511.511.180/72a5a039jw8f9d3gusrs1j20e80e7jrw.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Xiaodong's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Xiaodong's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/07/03/lai-zi-linkedin-de-swift-bian-cheng-feng-ge-zhi-nan/" itemprop="url">
                  来自 Linkedin 的 Swift 编程风格指南
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-03T09:37:29+08:00">
                2016-07-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/07/03/lai-zi-linkedin-de-swift-bian-cheng-feng-ge-zhi-nan/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/07/03/lai-zi-linkedin-de-swift-bian-cheng-feng-ge-zhi-nan/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><img src="https://ooo.0o0.ooo/2016/07/03/5778dc0ab45a1.jpg" alt=""></p>
<p>##1. Code Formatting:代码格式化</p>
<ul>
<li><strong>1.1</strong> 使用4个空格来代替Tabs</li>
<li><strong>1.2</strong> 避免过长的行，可以在XCode中进行设置单行最大长度：(Xcode-&gt;Preferences-&gt;Text Editing-&gt;Page guide at column: 160 is helpful for this)</li>
<li><strong>1.3</strong> 保证每个文件结尾都存在一个新行 Ensure that there is a newline at the end of every file.</li>
<li><strong>1.4</strong> 避免无意义的尾随空格: (Xcode-&gt;Preferences-&gt;Text Editing-&gt;Automatically trim trailing whitespace + Including whitespace-only lines).</li>
<li><strong>1.5</strong> 避免将单独的左花括号放置到一行，我们参考了：<a href="https://en.m.wikipedia.org/wiki/Indent_style#Variant:_1TBS" target="_blank" rel="external">1TBS style</a>.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">class SomeClass &#123;</div><div class="line">    func someMethod() &#123;</div><div class="line">        if x == y &#123;</div><div class="line">            /* ... */</div><div class="line">        &#125; else if x == z &#123;</div><div class="line">            /* ... */</div><div class="line">        &#125; else &#123;</div><div class="line">            /* ... */</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    /* ... */</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>1.6</strong> 在写变量的类型声明、字典类型的键、函数参数、协议的声明或者父类的时候，不要在冒号前添加空格。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">// specifying type</div><div class="line">let pirateViewController: PirateViewController</div><div class="line"></div><div class="line">// dictionary syntax (note that we left-align as opposed to aligning colons)</div><div class="line">let ninjaDictionary: [String: AnyObject] = [</div><div class="line">    &quot;fightLikeDairyFarmer&quot;: false,</div><div class="line">    &quot;disgusting&quot;: true</div><div class="line">]</div><div class="line"></div><div class="line">// declaring a function</div><div class="line">func myFunction&lt;T, U: SomeProtocol where T.RelatedType == U&gt;(firstArgument: U, secondArgument: T) &#123;</div><div class="line">    /* ... */</div><div class="line">&#125;</div><div class="line"></div><div class="line">// calling a function</div><div class="line">someFunction(someArgument: &quot;Kitten&quot;)</div><div class="line"></div><div class="line">// superclasses</div><div class="line">class PirateViewController: UIViewController &#123;</div><div class="line">    /* ... */</div><div class="line">&#125;</div><div class="line"></div><div class="line">// protocols</div><div class="line">extension PirateViewController: UITableViewDataSource &#123;</div><div class="line">    /* ... */</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>1.7</strong> 一般来说，逗号后面都要跟随一个空格。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let myArray = [1, 2, 3, 4, 5]</div></pre></td></tr></table></figure>
<ul>
<li><strong>1.8</strong> 在二元操作符譬如<code>+</code>, <code>==</code>, 或者 <code>-&gt;</code>的前后需要加上空格，但是对于<code>(</code> 、`)的前后不需要加空格。</li>
</ul>
<ul>
<li><strong>1.9</strong> 我们默认使用Xcode推荐的格式化风格(CTRL-I) ，在声明某个函数的时候会多行排布参数。</li>
</ul>
<ul>
<li><strong>1.10</strong> 在调用多参数函数的时候，会把多个参数放置到单独的行中：</li>
</ul>
<ul>
<li><strong>1.11</strong> 对于大型的数组或者字典类型，应该将其分割到多行内，<code>[</code> 与 <code>]</code>类比于花括号进行处理。对于闭包而言也应该同样适合于该规则。</li>
</ul>
<ul>
<li><strong>1.12</strong> 尽可能地使用本地变量的方式来避免多行的判断语句。</li>
</ul>
<p>##2. Naming:命名</p>
<ul>
<li><strong>2.1</strong> Swift中不需要再使用Objective-C那样的前缀，譬如使用 <code>GuybrushThreepwood</code> 而不是<code>LIGuybrushThreepwood</code>。</li>
<li><strong>2.2</strong> 对于类型名即<code>struct</code>, <code>enum</code>, <code>class</code>, <code>typedef</code>, <code>associatedtype</code>等等使用 <code>PascalCase</code> 。</li>
<li><strong>2.3</strong> 对于函数名、方法名、变量名、常量、参数名等使用<code>camelCase</code>。</li>
<li><strong>2.4</strong> 在使用首字母缩写的时候尽可能地全部大写，并且注意保证全部代码中的统一。不过如果缩写被用于命名的起始，那么就全部小写。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">// &quot;HTML&quot; is at the start of a variable name, so we use lowercase &quot;html&quot;</div><div class="line">let htmlBodyContent: String = &quot;&lt;p&gt;Hello, World!&lt;/p&gt;&quot;</div><div class="line">// Prefer using ID to Id</div><div class="line">let profileID: Int = 1</div><div class="line">// Prefer URLFinder to UrlFinder</div><div class="line">class URLFinder &#123;</div><div class="line">    /* ... */</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>2.5</strong> 对于静态常量使用 <code>k</code> 前缀 + PascalCase。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">class MyClassName &#123;</div><div class="line">    // use `k` prefix for constant primitives</div><div class="line">    static let kSomeConstantHeight: CGFloat = 80.0</div><div class="line"></div><div class="line">    // use `k` prefix for non-primitives as well</div><div class="line">    static let kDeleteButtonColor = UIColor.redColor()</div><div class="line"></div><div class="line">    // don&apos;t use `k` prefix for singletons</div><div class="line">    static let sharedInstance = MyClassName()</div><div class="line"></div><div class="line">    /* ... */</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>2.6</strong> 对于泛型或者关联类型，使用<code>PascalCase</code>描述泛型，如果泛型名与其他重复，那么可以添加一个<code>Type</code>后缀名到泛型名上。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">class SomeClass&lt;T&gt; &#123; /* ... */ &#125;</div><div class="line">class SomeClass&lt;Model&gt; &#123; /* ... */ &#125;</div><div class="line">protocol Modelable &#123;</div><div class="line">    associatedtype Model</div><div class="line">&#125;</div><div class="line">protocol Sequence &#123;</div><div class="line">    associatedtype IteratorType: Iterator</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>2.7</strong> 命名必须要是不模糊的并且方便表述的</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// PREFERRED</div><div class="line">class RoundAnimatingButton: UIButton &#123; /* ... */ &#125;</div><div class="line"></div><div class="line">// NOT PREFERRED</div><div class="line">class CustomButton: UIButton &#123; /* ... */ &#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>2.8</strong> 不要使用缩写，可以选择较为简短的单词。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">// PREFERRED</div><div class="line">class RoundAnimatingButton: UIButton &#123;</div><div class="line">    let animationDuration: NSTimeInterval</div><div class="line"></div><div class="line">    func startAnimating() &#123;</div><div class="line">        let firstSubview = subviews.first</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">// NOT PREFERRED</div><div class="line">class RoundAnimating: UIButton &#123;</div><div class="line">    let aniDur: NSTimeInterval</div><div class="line"></div><div class="line">    func srtAnmating() &#123;</div><div class="line">        let v = subviews.first</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>2.9</strong> 对于不是很明显的类型需要将类型信息包含在属性名中。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line">// PREFERRED</div><div class="line">class ConnectionTableViewCell: UITableViewCell &#123;</div><div class="line">    let personImageView: UIImageView</div><div class="line"></div><div class="line">    let animationDuration: NSTimeInterval</div><div class="line"></div><div class="line">    // it is ok not to include string in the ivar name here because it&apos;s obvious</div><div class="line">    // that it&apos;s a string from the property name</div><div class="line">    let firstName: String</div><div class="line"></div><div class="line">    // though not preferred, it is OK to use `Controller` instead of `ViewController`</div><div class="line">    let popupController: UIViewController</div><div class="line">    let popupViewController: UIViewController</div><div class="line"></div><div class="line">    // when working with a subclass of `UIViewController` such as a table view</div><div class="line">    // controller, collection view controller, split view controller, etc.,</div><div class="line">    // fully indicate the type in the name.</div><div class="line">    let popupTableViewController: UITableViewController</div><div class="line"></div><div class="line">    // when working with outlets, make sure to specify the outlet type in the</div><div class="line">    // variable name.</div><div class="line">    @IBOutlet weak var submitButton: UIButton!</div><div class="line">    @IBOutlet weak var emailTextField: UITextField!</div><div class="line">    @IBOutlet weak var nameLabel: UILabel!</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line">// NOT PREFERRED</div><div class="line">class ConnectionTableViewCell: UITableViewCell &#123;</div><div class="line">    // this isn&apos;t a `UIImage`, so shouldn&apos;t be called image</div><div class="line">    // use personImageView instead</div><div class="line">    let personImage: UIImageView</div><div class="line"></div><div class="line">    // this isn&apos;t a `String`, so it should be `textLabel`</div><div class="line">    let text: UILabel</div><div class="line"></div><div class="line">    // `animation` is not clearly a time interval</div><div class="line">    // use `animationDuration` or `animationTimeInterval` instead</div><div class="line">    let animation: NSTimeInterval</div><div class="line"></div><div class="line">    // this is not obviously a `String`</div><div class="line">    // use `transitionText` or `transitionString` instead</div><div class="line">    let transition: String</div><div class="line"></div><div class="line">    // this is a view controller - not a view</div><div class="line">    let popupView: UIViewController</div><div class="line"></div><div class="line">    // as mentioned previously, we don&apos;t want to use abbreviations, so don&apos;t use</div><div class="line">    // `VC` instead of `ViewController`</div><div class="line">    let popupVC: UIViewController</div><div class="line"></div><div class="line">    // even though this is still technically a `UIViewController`, this variable</div><div class="line">    // should indicate that we are working with a *Table* View Controller</div><div class="line">    let popupViewController: UITableViewController</div><div class="line"></div><div class="line">    // for the sake of consistency, we should put the type name at the end of the</div><div class="line">    // variable name and not at the start</div><div class="line">    @IBOutlet weak var btnSubmit: UIButton!</div><div class="line">    @IBOutlet weak var buttonSubmit: UIButton!</div><div class="line"></div><div class="line">    // we should always have a type in the variable name when dealing with outlets</div><div class="line">    // for example, here, we should have `firstNameLabel` instead</div><div class="line">    @IBOutlet weak var firstName: UILabel!</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>2.10</strong> 在编写函数参数的时候，要保证每个参数都易于理解其功能。</li>
<li><strong>2.11</strong> 根据 <a href="https://swift.org/documentation/api-design-guidelines/" target="_blank" rel="external">Apple’s API Design Guidelines</a>, 对于<code>protocol</code>，如果其描述的是正在做的事情，譬如<code>Collection</code>，那么应该命名为名词。而如果是用于描述某种能力，譬如<code>Equatable</code>, <code>ProgressReporting</code>，那么应该添加 <code>able</code>, <code>ible</code>, 或者 <code>ing</code> 这样的后缀。如果你的协议并不符合上述两种情形，那么应该直接添加一个<code>Protocol</code>后缀，譬如：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">// here, the name is a noun that describes what the protocol does</div><div class="line">protocol TableViewSectionProvider &#123;</div><div class="line">    func rowHeight(atRow row: Int) -&gt; CGFloat</div><div class="line">    var numberOfRows: Int &#123; get &#125;</div><div class="line">    /* ... */</div><div class="line">&#125;</div><div class="line"></div><div class="line">// here, the protocol is a capability, and we name it appropriately</div><div class="line">protocol Loggable &#123;</div><div class="line">    func logCurrentState()</div><div class="line">    /* ... */</div><div class="line">&#125;</div><div class="line"></div><div class="line">// suppose we have an `InputTextView` class, but we also want a protocol</div><div class="line">// to generalize some of the functionality - it might be appropriate to</div><div class="line">// use the `Protocol` suffix here</div><div class="line">protocol InputTextViewProtocol &#123;</div><div class="line">    func sendTrackingEvent()</div><div class="line">    func inputText() -&gt; String</div><div class="line">    /* ... */</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="3-Coding-Style"><a href="#3-Coding-Style" class="headerlink" title="3. Coding Style"></a>3. Coding Style</h2><p>###3.1 General</p>
<ul>
<li><strong>3.1.1</strong> 尽可能地使用<code>let</code>来代替<code>var</code>。</li>
<li><strong>3.1.2</strong> 尽可能地使用 <code>map</code>, <code>filter</code>, <code>reduce</code>的组合来进行集合的转换等操作，并且尽可能地避免使用带有副作用的闭包。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">// PREFERRED</div><div class="line">let stringOfInts = [1, 2, 3].flatMap &#123; String($0) &#125;</div><div class="line">// [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;]</div><div class="line"></div><div class="line">// NOT PREFERRED</div><div class="line">var stringOfInts: [String] = []</div><div class="line">for integer in [1, 2, 3] &#123;</div><div class="line">    stringOfInts.append(String(integer))</div><div class="line">&#125;</div><div class="line"></div><div class="line">// PREFERRED</div><div class="line">let evenNumbers = [4, 8, 15, 16, 23, 42].filter &#123; $0 % 2 == 0 &#125;</div><div class="line">// [4, 8, 16, 42]</div><div class="line"></div><div class="line">// NOT PREFERRED</div><div class="line">var evenNumbers: [Int] = []</div><div class="line">for integer in [4, 8, 15, 16, 23, 42] &#123;</div><div class="line">    if integer % 2 == 0 &#123;</div><div class="line">        evenNumbers(integer)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.1.3</strong> 尽可能地显式声明不方便进行类型推测的变量或者常量的类型名。</li>
<li><strong>3.1.4</strong> 如果你的函数需要返回多个参数，那么尽可能地使用<code>Tuple</code>来代替<code>inout</code>参数。如果你会多次使用某个元组，那么应该使用<code>typealias</code>设置别名。如果返回的参数超过三个，那么应该使用结构体或者类来替代。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">func pirateName() -&gt; (firstName: String, lastName: String) &#123;</div><div class="line">    return (&quot;Guybrush&quot;, &quot;Threepwood&quot;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">let name = pirateName()</div><div class="line">let firstName = name.firstName</div><div class="line">let lastName = name.lastName</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.1.5</strong> 在创建delegates/protocols的时候需要小心所谓的保留环(retain cycles)，这些属性需要被声明为<code>weak</code>。</li>
<li><strong>3.1.6</strong> 在闭包中直接调用<code>self</code>可能会导致保留环，可以使用<a href="https://developer.apple.com/library/ios/documentation/swift/conceptual/Swift_Programming_Language/Closures.html#//apple_ref/doc/uid/TP40014097-CH11-XID_163" target="_blank" rel="external">capture list</a> 在这种情况下:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">myFunctionWithClosure() &#123; [weak self] (error) -&gt; Void in</div><div class="line">    // you can do this</div><div class="line"></div><div class="line">    self?.doSomething()</div><div class="line"></div><div class="line">    // or you can do this</div><div class="line"></div><div class="line">    guard let strongSelf = self else &#123;</div><div class="line">        return</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    strongSelf.doSomething()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.1.7</strong> 不要使用 labeled breaks。</li>
<li><strong>3.1.8</strong> 不要在控制流逻辑判断的时候加上圆括号</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// PREFERRED</div><div class="line">if x == y &#123;</div><div class="line">    /* ... */</div><div class="line">&#125;</div><div class="line"></div><div class="line">// NOT PREFERRED</div><div class="line">if (x == y) &#123;</div><div class="line">    /* ... */</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.1.9</strong> 避免在使用enum的时候写出全名</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// PREFERRED</div><div class="line">imageView.setImageWithURL(url, type: .person)</div><div class="line"></div><div class="line">// NOT PREFERRED</div><div class="line">imageView.setImageWithURL(url, type: AsyncImageView.Type.person)</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.1.10</strong> 在写类方法的时候不能用简短写法，应该使用类名.方法名，这样能够保证代码的可读性</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// PREFERRED</div><div class="line">imageView.backgroundColor = UIColor.whiteColor()</div><div class="line"></div><div class="line">// NOT PREFERRED</div><div class="line">imageView.backgroundColor = .whiteColor()</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.1.11</strong> 在非必要的时候不要写<code>self.</code>。</li>
<li><strong>3.1.12</strong> 在编写某个方法的时候注意考虑下这个方法是否有可能被复写，如果不可能被复写那么应该使用<code>final</code>修饰符。还要注意加上final之后也会导致无法在测试的时候进行复写，所以还是需要综合考虑。一般而言，加上<code>final</code>修饰符后会提高编译的效率，所以应该尽可能地使用该修饰符。</li>
<li><strong>3.1.13</strong> 在使用譬如<code>else</code>, <code>catch</code>等等类似的语句的时候，将关键字与花括号放在一行，同样遵循<a href="https://en.m.wikipedia.org/wiki/Indent_style#Variant:_1TBS" target="_blank" rel="external">1TBS style</a>规范，这边列出了常见的<code>if</code>/<code>else</code> 以及 <code>do</code>/<code>catch</code> 示范代码。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">if someBoolean &#123;</div><div class="line">    // do something</div><div class="line">&#125; else &#123;</div><div class="line">    // do something else</div><div class="line">&#125;</div><div class="line"></div><div class="line">do &#123;</div><div class="line">    let fileContents = try readFile(&quot;filename.txt&quot;)</div><div class="line">&#125; catch &#123;</div><div class="line">    print(error)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###3.2 Access Modifiers</p>
<ul>
<li><strong>3.2.1</strong> 在需要的时候应该将访问修饰符放在关键字的第一位。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// PREFERRED</div><div class="line">private static let kMyPrivateNumber: Int</div><div class="line"></div><div class="line">// NOT PREFERRED</div><div class="line">static private let kMyPrivateNumber: Int</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.2.2</strong> 访问修饰符不应该单独放一行：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">// PREFERRED</div><div class="line">public class Pirate &#123;</div><div class="line">    /* ... */</div><div class="line">&#125;</div><div class="line"></div><div class="line">// NOT PREFERRED</div><div class="line">public</div><div class="line">class Pirate &#123;</div><div class="line">    /* ... */</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.2.3</strong> 一般来说，不要显式地写默认的 <code>internal</code>访问修饰符。</li>
<li><strong>3.2.4</strong> 如果某个变量需要在测试的时候被使用到，那么应该标识为<code>internal</code>来保证<code>@testable import ModuleName</code>。这里需要注意的是，对于某些应该被声明为<code>private</code>的变量因为测试用途而声明为了<code>internal</code>，那么应该在注释里特别地注明。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> This variable defines the pirate&apos;s name.</div><div class="line"> - warning: Not `private` for `@testable`.</div><div class="line"> */</div><div class="line">let pirateName = &quot;LeChuck&quot;</div></pre></td></tr></table></figure>
<h3 id="3-3-Custom-Operators-自定义操作符"><a href="#3-3-Custom-Operators-自定义操作符" class="headerlink" title="3.3 Custom Operators:自定义操作符"></a><a href="https://github.com/wxyyxc1992/iOS-Boilerplate/blob/master/Doc/language/swift/advanced/bestpractices/styleguide/linkedin-swift-style-guide.md#33-custom-operators自定义操作符" target="_blank" rel="external"></a>3.3 Custom Operators:自定义操作符</h3><p>尽可能地选用命名函数来代替自定义操作符。如果你打算引入一个自定义的操作符，那么一定要有非常充分的理由来说明为啥要讲一个新的操作符引入到全局作用域，而不是使用其他一些可替代的方式。你也可以选择去复写一些现有的操作符，譬如<code>==</code>来适应一些新的类型，不过要保证你添加的用法一定要与语义相符。譬如<code>==</code> 应该只能用于表示相等性测试并且返回一个布尔值。</p>
<p>###3.4 Switch Statements and <code>enum</code>s</p>
<ul>
<li><strong>3.4.1</strong> 在使用枚举类型作为switch的参数的时候，避免引入<code>default</code>关键字，而应该将没有使用的情形放到下面然后使用break关键字来避免被执行。</li>
<li><strong>3.4.2</strong> Swift中默认会在每个case的结尾进行break，因此没必要的时候不需要显式地声明<code>break</code>关键字。</li>
<li><strong>3.4.3</strong> The <code>case</code> statements should line up with the <code>switch</code> statement itself as per default Swift standards.</li>
<li><strong>3.4.4</strong> When defining a case that has an associated value, make sure that this value is appropriately labeled as opposed to just types (e.g. <code>case Hunger(hungerLevel: Int)</code> instead of <code>case Hunger(Int)</code>).</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">enum Problem &#123;</div><div class="line">    case attitude</div><div class="line">    case hair</div><div class="line">    case hunger(hungerLevel: Int)</div><div class="line">&#125;</div><div class="line"></div><div class="line">func handleProblem(problem: Problem) &#123;</div><div class="line">    switch problem &#123;</div><div class="line">    case .attitude:</div><div class="line">        print(&quot;At least I don&apos;t have a hair problem.&quot;)</div><div class="line">    case .hair:</div><div class="line">        print(&quot;Your barber didn&apos;t know when to stop.&quot;)</div><div class="line">    case .hunger(let hungerLevel):</div><div class="line">        print(&quot;The hunger level is \(hungerLevel).&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.4.5</strong> 优先使用譬如<code>case 1, 2, 3:</code>这样的列表表达式而不是使用<code>fallthrough</code>关键字。</li>
<li><strong>3.4.6</strong> 如果你添加了一个默认的case并且该case不应该被使用，那么应该在default情形下抛出异常。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">func handleDigit(digit: Int) throws &#123;</div><div class="line">    case 0, 1, 2, 3, 4, 5, 6, 7, 8, 9:</div><div class="line">        print(&quot;Yes, \(digit) is a digit!&quot;)</div><div class="line">    default:</div><div class="line">        throw Error(message: &quot;The given number was not a digit.&quot;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>###3.5 Optionals</p>
<ul>
<li><strong>3.5.1</strong> 只应该在 <code>@IBOutlet</code>中使用隐式地未包裹的Options。否则其他情况下就应该使用Non-Optional或者正常的Optional的变量。虽然有时候你能保证某个变量肯定非<code>nil</code>，不过这样用的话还是比较安全并且能保证上下一致性。</li>
</ul>
<p>The only time you should be using implicitly unwrapped optionals is withs. In every other case, it is better to use a non-optional or regular optional variable. Yes, there are cases in which you can probably “guarantee” that the variable will never be <code>nil</code> when used, but it is better to be safe and consistent.</p>
<ul>
<li><strong>3.5.2</strong> 不要使用 <code>as!</code> 或者 <code>try!</code>.</li>
<li><strong>3.5.3</strong> 如果你只是打算判断存放在Optional中的值是否为空，那么你应该直接与<code>nil</code>进行判断而不是使用<code>if let</code>语句将值取出来。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// PREFERERED</div><div class="line">if someOptional != nil &#123;</div><div class="line">    // do something</div><div class="line">&#125;</div><div class="line"></div><div class="line">// NOT PREFERRED</div><div class="line">if let _ = someOptional &#123;</div><div class="line">    // do something</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.5.4</strong> 不要使用 <code>unowned</code>。你可以将<code>unowned</code>当做对于<code>weak</code>变量的隐式解包，虽然有时候<code>unowned</code>与<code>weak</code>相比有小小地性能提升，不过还是不建议进行使用。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">// PREFERRED</div><div class="line">weak var parentViewController: UIViewController?</div><div class="line"></div><div class="line">// NOT PREFERRED</div><div class="line">weak var parentViewController: UIViewController!</div><div class="line">unowned var parentViewController: UIViewController</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.5.5</strong> 当对Optionals进行解包的时候，使用与Optionals变量一致的变量名</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">guard let myVariable = myVariable else &#123;</div><div class="line">    return</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3-6-Protocols"><a href="#3-6-Protocols" class="headerlink" title="3.6 Protocols"></a>3.6 Protocols</h3><p>在实现协议的时候，大体上有两种代码组织方式：</p>
<ol>
<li>使用 <code>// MARK:</code> 来注释你的专门用于实现协议中规定的方法</li>
<li>在你的类或者结构体实现之外使用一个扩展来存放实现代码，不过要保证在一个源文件中</li>
</ol>
<p>不过需要注意的是，如果你是使用了Extension方式，那么定义在Extension中的方法是无法被子类复写的，这样可能会无法进行测试。</p>
<h3 id="3-7-Properties"><a href="#3-7-Properties" class="headerlink" title="3.7 Properties"></a><a href="https://github.com/wxyyxc1992/iOS-Boilerplate/blob/master/Doc/language/swift/advanced/bestpractices/styleguide/linkedin-swift-style-guide.md#37-properties" target="_blank" rel="external"></a>3.7 Properties</h3><ul>
<li><strong>3.7.1</strong> 如果是定义一个只读的需要经过计算的属性，那么不需要声明 <code>get {}</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">var computedProperty: String &#123;</div><div class="line">    if someBool &#123;</div><div class="line">        return &quot;I&apos;m a mighty pirate!&quot;</div><div class="line">    &#125;</div><div class="line">    return &quot;I&apos;m selling these fine leather jackets.&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.7.2</strong> 在使用 <code>get {}</code>, <code>set {}</code>, <code>willSet</code>, 以及 <code>didSet</code>, 注意块的缩进</li>
<li><strong>3.7.3</strong> 尽管你可以在<code>willSet</code>/<code>didSet</code>以及 <code>set</code>方法中使用自定义的名称，不过建议还是使用默认的<code>newValue</code>/<code>oldValue</code>变量名</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">var computedProperty: String &#123;</div><div class="line">    get &#123;</div><div class="line">        if someBool &#123;</div><div class="line">            return &quot;I&apos;m a mighty pirate!&quot;</div><div class="line">        &#125;</div><div class="line">        return &quot;I&apos;m selling these fine leather jackets.&quot;</div><div class="line">    &#125;</div><div class="line">    set &#123;</div><div class="line">        computedProperty = newValue</div><div class="line">    &#125;</div><div class="line">    willSet &#123;</div><div class="line">        print(&quot;will set to \(newValue)&quot;)</div><div class="line">    &#125;</div><div class="line">    didSet &#123;</div><div class="line">        print(&quot;did set from \(oldValue) to \(newValue)&quot;)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.7.4</strong> 将任何类常量设置为<code>static</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">class MyTableViewCell: UITableViewCell &#123;</div><div class="line">    static let kReuseIdentifier = String(MyTableViewCell)</div><div class="line">    static let kCellHeight: CGFloat = 80.0</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.7.5</strong> 可以使用如下方式便捷地声明一个单例变量：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">class PirateManager &#123;</div><div class="line">    static let sharedInstance = PirateManager()</div><div class="line"></div><div class="line">    /* ... */</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="3-8-Closures-闭包"><a href="#3-8-Closures-闭包" class="headerlink" title="3.8 Closures:闭包"></a>3.8 Closures:闭包</h3><ul>
<li><strong>3.8.1</strong> 如果闭包中的某个参数的类型是显而易见的，那么可以避免声明类型。不过有时候为了保证可读性与一致性，还是会显示声明参数类型。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">// omitting the type</div><div class="line">doSomethingWithClosure() &#123; response in</div><div class="line">    print(response)</div><div class="line">&#125;</div><div class="line"></div><div class="line">// explicit type</div><div class="line">doSomethingWithClosure() &#123; response: NSURLResponse in</div><div class="line">    print(response)</div><div class="line">&#125;</div><div class="line"></div><div class="line">// using shorthand in a map statement</div><div class="line">[1, 2, 3].flatMap &#123; String($0) &#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.8.2</strong> 在参数列表中，如果是使用了捕获变量或者声明了非Void的返回值，那么应该将参数列表写在一个圆括号里，其他情况下则可以省略圆括号。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">// parentheses due to capture list</div><div class="line">doSomethingWithClosure() &#123; [weak self] (response: NSURLResponse) in</div><div class="line">    self?.handleResponse(response)</div><div class="line">&#125;</div><div class="line"></div><div class="line">// parentheses due to return type</div><div class="line">doSomethingWithClosure() &#123; (response: NSURLResponse) -&gt; String in</div><div class="line">    return String(response)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.8.3</strong> 如果你是将闭包声明为一个类型，那么除非该类型为Optional或者该闭包是另一个闭包的参数，否则不需要使用圆括号进行包裹。不过需要用圆括号来标注参数列表，并且使用<code>Void</code>来指明没有任何结果返回。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">let completionBlock: (success: Bool) -&gt; Void = &#123;</div><div class="line">    print(&quot;Success? \(success)&quot;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">let completionBlock: () -&gt; Void = &#123;</div><div class="line">    print(&quot;Completed!&quot;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">let completionBlock: (() -&gt; Void)? = nil</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.8.4</strong> 尽可能地将参数名与左括号放在一行，不过要避免打破每行最长160个字符的限制。</li>
</ul>
<p>Keep parameter names on same line as the opening brace for closures when possible without too much horizontal overflow (i.e. ensure lines are less than 160 characters).</p>
<ul>
<li><strong>3.8.5</strong> 尽可能地使用 trailing closure表达式，除非需要显示地声明闭包参数的外部参数名。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// trailing closure</div><div class="line">doSomething(1.0) &#123; parameter1 in</div><div class="line">    print(&quot;Parameter 1 is \(parameter1)&quot;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">// no trailing closure</div><div class="line">doSomething(1.0, success: &#123; parameter1 in</div><div class="line">    print(&quot;Success with \(parameter1)&quot;)</div><div class="line">&#125;, failure: &#123; parameter1 in</div><div class="line">    print(&quot;Failure with \(parameter1)&quot;)</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>###3.9 Arrays</p>
<ul>
<li><strong>3.9.1</strong> 一般来说，避免使用下标直接访问某个数组，而应该使用类似于<code>.first</code>、<code>.last</code>这样的访问器进行访问。另外，应该优先使用<code>for item in items</code>语法来替代`for i in 0..。如果你打算用下标遍历数组，那么一定保证不能越界。</li>
<li><strong>3.9.2</strong> 永远不要使用<code>+=</code> 或者 <code>+</code>运算符来增加或者连接数组，应该使用<code>.append()</code> 或者 <code>.appendContentsOf()</code> 方法。如果你想定义一个从其他数组生成的不可变数组，那么应该使用<code>let</code>关键字，即： <code>let myNewArray = arr1 + arr2</code>, 或者 <code>let myNewArray = [arr1, arr2].flatten()</code>。</li>
</ul>
<h3 id="3-10-Error-Handling"><a href="#3-10-Error-Handling" class="headerlink" title="3.10 Error Handling"></a><a href="https://github.com/wxyyxc1992/iOS-Boilerplate/blob/master/Doc/language/swift/advanced/bestpractices/styleguide/linkedin-swift-style-guide.md#310-error-handling" target="_blank" rel="external"></a>3.10 Error Handling</h3><p>假设某个函数 <code>myFunction</code> 需要去返回一个<code>String</code>类型，不过有可能会在某个点抛出异常，一般来说会将该函数的返回值设置为<code>String?</code>：</p>
<p>Example:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">func readFile(withFilename filename: String) -&gt; String? &#123;</div><div class="line">    guard let file = openFile(filename) else &#123;</div><div class="line">        return nil</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    let fileContents = file.read()</div><div class="line">    file.close()</div><div class="line">    return fileContents</div><div class="line">&#125;</div><div class="line"></div><div class="line">func printSomeFile() &#123;</div><div class="line">    let filename = &quot;somefile.txt&quot;</div><div class="line">    guard let fileContents = readFile(filename) else &#123;</div><div class="line">        print(&quot;Unable to open file \(filename).&quot;)</div><div class="line">        return</div><div class="line">    &#125;</div><div class="line">    print(fileContents)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>不过作为异常处理的角度，我们应该使用Swift的<code>try-catch</code>表达式，这样能显式地知道错误点：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">struct Error: ErrorType &#123;</div><div class="line">    public let file: StaticString</div><div class="line">    public let function: StaticString</div><div class="line">    public let line: UInt</div><div class="line">    public let message: String</div><div class="line"></div><div class="line">    public init(message: String, file: StaticString = #file, function: StaticString = #function, line: UInt = #line) &#123;</div><div class="line">        self.file = file</div><div class="line">        self.function = function</div><div class="line">        self.line = line</div><div class="line">        self.message = message</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Example usage:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">func readFile(withFilename filename: String) throws -&gt; String &#123;</div><div class="line">    guard let file = openFile(filename) else &#123;</div><div class="line">        throw Error(message: &quot;Unable to open file named \(filename).&quot;)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    let fileContents = file.read()</div><div class="line">    file.close()</div><div class="line">    return fileContents</div><div class="line">&#125;</div><div class="line"></div><div class="line">func printSomeFile() &#123;</div><div class="line">    do &#123;</div><div class="line">        let fileContents = try readFile(filename)</div><div class="line">        print(fileContents)</div><div class="line">    &#125; catch &#123;</div><div class="line">        print(error)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>总而言之，如果某个函数可能会出错，并且出错的原因不能显式地观测到，那么应该优先抛出异常而不是使用一个Optional作为返回值。</p>
<p>###3.11 Using <code>guard</code> Statements</p>
<ul>
<li><strong>3.11.1</strong> 一般来说，我们会优先使用所谓的”early return”策略来避免<code>if</code>表达式中的多层嵌套的代码。在这种情况下使用<code>guard</code>语句能够有效地提升代码的可读性。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">// PREFERRED</div><div class="line">func eatDoughnut(atIndex index: Int) &#123;</div><div class="line">    guard index &gt;= 0 &amp;&amp; index &lt; doughnuts else &#123;</div><div class="line">        // return early because the index is out of bounds</div><div class="line">        return</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    let doughnut = doughnuts[index]</div><div class="line">    eat(doughnut)</div><div class="line">&#125;</div><div class="line"></div><div class="line">// NOT PREFERRED</div><div class="line">func eatDoughnuts(atIndex index: Int) &#123;</div><div class="line">    if index &gt;= 0 &amp;&amp; index &lt; donuts.count &#123;</div><div class="line">        let doughnut = doughnuts[index]</div><div class="line">        eat(doughnut)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.11.2</strong> 在对Optional类型进行解包的时候，优先使用 <code>guard</code> 语句来避免<code>if</code>语句中较多的缩进。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// PREFERRED</div><div class="line">guard let monkeyIsland = monkeyIsland else &#123;</div><div class="line">    return</div><div class="line">&#125;</div><div class="line">bookVacation(onIsland: monkeyIsland)</div><div class="line">bragAboutVacation(onIsland: monkeyIsland)</div><div class="line"></div><div class="line">// NOT PREFERRED</div><div class="line">if let monkeyIsland = monkeyIsland &#123;</div><div class="line">    bookVacation(onIsland: monkeyIsland)</div><div class="line">    bragAboutVacation(onIsland: monkeyIsland)</div><div class="line">&#125;</div><div class="line"></div><div class="line">// EVEN LESS PREFERRED</div><div class="line">if monkeyIsland == nil &#123;</div><div class="line">    return</div><div class="line">&#125;</div><div class="line">bookVacation(onIsland: monkeyIsland!)</div><div class="line">bragAboutVacation(onIsland: monkeyIsland!)</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.11.3</strong> 在决定是要用<code>if</code>表达式还是<code>guard</code>表达式进行Optional类型解包的时候，最重要的点就是要保证代码的可读性。很多时候要注意因时而变，因地制宜：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">// an `if` statement is readable here</div><div class="line">if operationFailed &#123;</div><div class="line">    return</div><div class="line">&#125;</div><div class="line"></div><div class="line">// a `guard` statement is readable here</div><div class="line">guard isSuccessful else &#123;</div><div class="line">    return</div><div class="line">&#125;</div><div class="line"></div><div class="line">// double negative logic like this can get hard to read - i.e. don&apos;t do this</div><div class="line">guard !operationFailed else &#123;</div><div class="line">    return</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.11.4</strong> 当需要进行多可能性处理的时候，应该优先使用<code>if</code>表达式而不是<code>guard</code>表达式。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">// PREFERRED</div><div class="line">if isFriendly &#123;</div><div class="line">    print(&quot;Hello, nice to meet you!&quot;)</div><div class="line">&#125; else &#123;</div><div class="line">    print(&quot;You have the manners of a beggar.&quot;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">// NOT PREFERRED</div><div class="line">guard isFriendly else &#123;</div><div class="line">    print(&quot;You have the manners of a beggar.&quot;)</div><div class="line">    return</div><div class="line">&#125;</div><div class="line"></div><div class="line">print(&quot;Hello, nice to meet you!&quot;)</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.11.5</strong> 一般来说，<code>guard</code>应该被用于需要直接退出当前上下文的情形。而对于下面这种两个条件互不干扰的情况，应该使用两个<code>if</code>而不是两个<code>guard</code>。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">if let monkeyIsland = monkeyIsland &#123;</div><div class="line">    bookVacation(onIsland: monkeyIsland)</div><div class="line">&#125;</div><div class="line"></div><div class="line">if let woodchuck = woodchuck where canChuckWood(woodchuck) &#123;</div><div class="line">    woodchuck.chuckWood()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.11.6</strong> 有时候我们会碰到要用<code>guard</code>语句进行多个optionals解包的情况，一般而言，对于复杂的错误处理的Optional类型需要将其拆分到多个单个表达式中。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">// combined because we just return</div><div class="line">guard let thingOne = thingOne,</div><div class="line">    let thingTwo = thingTwo,</div><div class="line">    let thingThree = thingThree else &#123;</div><div class="line">    return</div><div class="line">&#125;</div><div class="line"></div><div class="line">// separate statements because we handle a specific error in each case</div><div class="line">guard let thingOne = thingOne else &#123;</div><div class="line">    throw Error(message: &quot;Unwrapping thingOne failed.&quot;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">guard let thingTwo = thingTwo else &#123;</div><div class="line">    throw Error(message: &quot;Unwrapping thingTwo failed.&quot;)</div><div class="line">&#125;</div><div class="line"></div><div class="line">guard let thingThree = thingThree else &#123;</div><div class="line">    throw Error(message: &quot;Unwrapping thingThree failed.&quot;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>3.11.7</strong> 不要将<code>guard</code>表达式强行缩写到一行内。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// PREFERRED</div><div class="line">guard let thingOne = thingOne else &#123;</div><div class="line">    return</div><div class="line">&#125;</div><div class="line"></div><div class="line">// NOT PREFERRED</div><div class="line">guard let thingOne = thingOne else &#123; return &#125;</div></pre></td></tr></table></figure>
<h2 id="4-Documentation-Comments"><a href="#4-Documentation-Comments" class="headerlink" title="4. Documentation/Comments"></a>4. Documentation/Comments</h2><h3 id="4-1-Documentation"><a href="#4-1-Documentation" class="headerlink" title="4.1 Documentation"></a><a href="https://github.com/wxyyxc1992/iOS-Boilerplate/blob/master/Doc/language/swift/advanced/bestpractices/styleguide/linkedin-swift-style-guide.md#41-documentation" target="_blank" rel="external"></a>4.1 Documentation</h3><p>如果某个函数不是简单地<code>O(1)</code>操作，那么最好就是为该函数添加一些注释文档，这样能有效地提高代码的可读性与可维护性。之前有个非常不错的文档工具<a href="https://github.com/onevcat/VVDocumenter-Xcode" target="_blank" rel="external">VVDocumenter</a>。推荐阅读Apple的官方指南中的描述：<a href="https://developer.apple.com/library/tvos/documentation/Xcode/Reference/xcode_markup_formatting_ref/Attention.html#//apple_ref/doc/uid/TP40016497-CH29-SW1" target="_blank" rel="external">described in Apple’s Documentation</a>.</p>
<p>Guidelines:</p>
<ul>
<li><strong>4.1.1</strong> 每行不应超过160个字符</li>
<li><strong>4.1.2</strong> 即使某些注释只有一行，也应该使用块注释符： (<code>/** */</code>).</li>
<li><strong>4.1.3</strong> 不用给每行的开头都加上： <code>*</code>.</li>
<li><strong>4.1.4</strong> 使用新的 <code>- parameter</code> 标识符来代替老的<code>:param:</code> syntax (注意这边是小写的 <code>parameter</code> 而不是<code>Parameter</code>).</li>
<li><strong>4.1.5</strong> 如果你准备对参数/返回值/异常值来写注释，那么注意要一个不落的全局加上，尽管有时候会让文档显得重复冗余。有时候，如果只需要对单个参数进行注释，那么还不如直接放在描述里进行声明，而不需要专门的为参数写一个注释。</li>
<li><strong>4.1.6</strong> 对于复杂的使用类，应该添加一些具体的使用用例来描述类的用法。注意Swift的注释文档中是支持MarkDown语法的，这是一个很好的特性。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> ## Feature Support</div><div class="line"></div><div class="line"> This class does some awesome things. It supports:</div><div class="line"></div><div class="line"> - Feature 1</div><div class="line"> - Feature 2</div><div class="line"> - Feature 3</div><div class="line"></div><div class="line"> ## Examples</div><div class="line"></div><div class="line"> Here is an example use case indented by four spaces because that indicates a</div><div class="line"> code block:</div><div class="line"></div><div class="line">     let myAwesomeThing = MyAwesomeClass()</div><div class="line">     myAwesomeThing.makeMoney()</div><div class="line"></div><div class="line"> ## Warnings:告警</div><div class="line"></div><div class="line"> There are some things you should be careful of:</div><div class="line"></div><div class="line"> 1. Thing one</div><div class="line"> 2. Thing two</div><div class="line"> 3. Thing three</div><div class="line"> */</div><div class="line">class MyAwesomeClass &#123;</div><div class="line">    /* ... */</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>4.1.7</strong> 使用 - ` 在注释中著名引用的代码</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> This does something with a `UIViewController`, perchance.</div><div class="line"> - warning: Make sure that `someValue` is `true` before running this function.</div><div class="line"> */</div><div class="line">func myFunction() &#123;</div><div class="line">    /* ... */</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li><strong>4.1.8</strong> 保证文档的注释尽可能的简洁</li>
</ul>
<h3 id="4-2-Other-Commenting-Guidelines-其他的注释规则"><a href="#4-2-Other-Commenting-Guidelines-其他的注释规则" class="headerlink" title="4.2 Other Commenting Guidelines:其他的注释规则"></a>4.2 Other Commenting Guidelines:其他的注释规则</h3><ul>
<li><strong>4.2.1</strong> <code>//</code>后面总是要跟上一个空格</li>
<li><strong>4.2.2</strong> 注释永远要放在单独的行中</li>
<li><strong>4.2.3</strong> 在使用<code>// MARK: - whatever</code>的时候，注意MARK与代码之间保留一个空行</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">class Pirate &#123;</div><div class="line"></div><div class="line">    // MARK: - instance properties</div><div class="line"></div><div class="line">    private let pirateName: String</div><div class="line"></div><div class="line">    // MARK: - initialization</div><div class="line"></div><div class="line">    init() &#123;</div><div class="line">        /* ... */</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>原文链接:<a href="https://github.com/wxyyxc1992/iOS-Boilerplate/blob/master/Doc/language/swift/advanced/bestpractices/styleguide/linkedin-swift-style-guide.md#1-code-formatting" target="_blank" rel="external">github:Swift Style Guide</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://godknow.cn/2016/06/28/swiftzhong-de-wen-hao-he-gan-tan-hao/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="晓东儿">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva4.sinaimg.cn/crop.0.0.511.511.180/72a5a039jw8f9d3gusrs1j20e80e7jrw.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Xiaodong's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Xiaodong's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/28/swiftzhong-de-wen-hao-he-gan-tan-hao/" itemprop="url">
                  Swift中的问号?和感叹号!
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-28T16:50:22+08:00">
                2016-06-28
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/06/28/swiftzhong-de-wen-hao-he-gan-tan-hao/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/28/swiftzhong-de-wen-hao-he-gan-tan-hao/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>本文转载自：<a href="http://joeyio.com/ios/2014/06/04/swift---/" target="_blank" rel="external">代码手工艺人</a>的博客，原文名称：Swift之 ? 和 !</p>
<p>Swift语言使用var定义变量，但和别的语言不同，Swift里不会自动给变量赋初始值，也就是说变量不会有默认值，所以要求使用变量之前必须要对其初始化。如果在使用变量之前不进行初始化就会报错：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">var stringValue : String </div><div class="line">//error: variable &apos;stringValue&apos; used before being initialized</div><div class="line">//let hashValue = stringValue.hashValue</div><div class="line">//                            ^</div><div class="line">let hashValue = stringValue.hashValue</div></pre></td></tr></table></figure>
<p>上面了解到的是普通值，接下来Optional值要上场了。经<a href="http://onevcat.com/" target="_blank" rel="external">喵神</a>提醒，Optional其实是个<code>enum</code>，里面有<code>None</code>和<code>Some</code>两种类型。其实所谓的nil就是<code>Optional.None</code>, 非nil就是<code>Optional.Some</code>, 然后会通过<code>Some(T)</code>包装（wrap）原始值，这也是为什么在使用Optional的时候要拆包（从enum里取出来原始值）的原因, 也是PlayGround会把Optional值显示为类似<code>{Some &quot;hello world&quot;}</code>的原因，这里是enum Optional的定义：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">enum Optional&lt;T&gt; : LogicValue, Reflectable &#123;</div><div class="line">    case None</div><div class="line">    case Some(T)</div><div class="line">    init()</div><div class="line">    init(_ some: T)</div><div class="line"></div><div class="line">    /// Allow use in a Boolean context.</div><div class="line">    func getLogicValue() -&gt; Bool</div><div class="line"></div><div class="line">    /// Haskell&apos;s fmap, which was mis-named</div><div class="line">    func map&lt;U&gt;(f: (T) -&gt; U) -&gt; U?</div><div class="line">    func getMirror() -&gt; Mirror</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>声明为Optional只需要在类型后面<strong>紧跟</strong>一个<code>?</code>即可。如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var strValue: String?   //?相当于下面这种写法的语法糖</div><div class="line">var strValue: Optional&lt;Int&gt;</div></pre></td></tr></table></figure>
<p>一旦声明为Optional的，如果不显式的赋值就会有个默认值nil。判断一个Optional的值是否有值，可以用if来判断：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if strValue &#123;</div><div class="line">    //do sth with strValue</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>然后怎么使用Optional值呢？文档中也有提到说，在使用Optional值的时候需要在具体的操作，比如调用方法、属性、下标索引等前面需要加上一个<code>?</code>，经<a href="http://onevcat.com/" target="_blank" rel="external">喵神</a>指正，”Optional Chaining的问号的意思是询问是否响应后面这个方法，和原来的<code>isResponseToSelector</code>有些类似”，如果是nil值，也就是<code>Optional.None</code>，固然不能响应后面的方法，所以就会跳过，如果有值，就是<code>Optional.Some</code>，可能就会拆包(unwrap)，然后对拆包后的值执行后面的操作，比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let hashValue = strValue?.hashValue</div></pre></td></tr></table></figure>
<p>strValue是Optional的字符串，如果strValue是nil，则hashValue也为nil，如果strValue不为nil，hashValue就是strValue字符串的哈希值</p>
<p>到这里我们看到了<code>?</code>的两种使用场景:1.声明Optional值变量<br>2.用在对Optional值操作中，用来判断是否能响应后面的操作</p>
<p>另外，对于Optional值，不能直接进行操作，否则会报错：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">//error: &apos;String?&apos; does not have a member named &apos;hashValue&apos;</div><div class="line">//let hashValue = strValue.hashValue</div><div class="line">//                ^        ~~~~~~~~~</div><div class="line"></div><div class="line">let hashValue = strValue.hashValue</div></pre></td></tr></table></figure>
<p>上面提到Optional值需要拆包(unwrap)后才能得到原来值，然后才能对其操作，那怎么来拆包呢？拆包提到了几种方法，一种是<code>Optional Binding</code>， 比如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if let str = strValue &#123;</div><div class="line">    let hashValue = str.hashValue</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>还有一种是在具体的操作前添加<code>!</code>符号，好吧，这又是什么诡异的语法?!</p>
<p>直接上例子，strValue是Optional的String：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let hashValue = strValue!.hashValue</div></pre></td></tr></table></figure>
<p>这里的<code>!</code>表示“我确定这里的的strValue一定是非nil的，尽情调用吧” ，比如这种情况:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if strValue &#123;</div><div class="line">    let hashValue = strValue!.hashValue</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>{}里的strValue一定是非nil的，所以就能直接加上!，强制拆包(unwrap)并执行后面的操作。 当然如果不加判断，strValue不小心为nil的话，就会出错，crash掉。</p>
<p>考虑下这一种情况，我们有一个自定义的<code>MyViewController</code>类，类中有一个属性是<code>myLabel</code>，myLabel是在viewDidLoad中进行初始化。因为是在viewDidLoad中初始化，所以不能直接声明为普通值：<code>var myLabel : UILabel</code>，因为非Optional的变量必须在声明时或者构造器中进行初始化，但我们是想在viewDidLoad中初始化，所以就只能声明为Optional：<code>var myLabel: UILabel?</code>, 虽然我们确定在viewDidLoad中会初始化，并且在ViewController的生命周期内不会置为nil，但是在对myLabel操作时，每次依然要加上<code>!</code>来强制拆包(在读取值的时候，也可以用<code>?</code>，谢谢iPresent在回复中提醒)，比如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">myLabel!.text = &quot;text&quot;</div><div class="line">myLabel!.frame = CGRectMake(0, 0, 10, 10)</div><div class="line">...</div></pre></td></tr></table></figure>
<p>对于这种类型的值，我们可以直接这么声明：<code>var myLabel: UILabel!</code>, 果然是高(hao)大(gui)上(yi)的语法!, 这种是特殊的Optional，称为<code>Implicitly Unwrapped Optionals</code>, 直译就是隐式拆包的Optional，就等于说你每次对这种类型的值操作时，都会自动在操作前补上一个<code>!</code>进行拆包，然后在执行后面的操作，当然如果该值是nil，也一样会报错crash掉。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">var myLabel: UILabel!  //!相当于下面这种写法的语法糖</div><div class="line">var myLabel: ImplicitlyUnwrappedOptional&lt;UILabel&gt;</div></pre></td></tr></table></figure>
<p>Swift是门新生的语言，我们有幸见证了它的诞生，激动之余也在佩服苹果大刀阔斧的推出一个新的语言替代一个已经比较成熟语言的魄力，今天在知乎日报上看到一个回答是说Swift是一门玩具语言，正当想去吐槽，发现回答已经被删除了。个人认为苹果是很认真的推出Swift的，从Swift的各种细微的设计也能看的出来。</p>
<p>另外这两个小符号就花费了我不少的时间来理解，可能依然会有错误和不妥之处，欢迎大家指正，本文旨在抛砖引玉。除此之外，Swift还有很多很棒的特性，WWDC 2014 会有四五个和Swift语言相关的Video，大家也可以去关注一下。</p>
<p>最后要感谢<a href="http://onevcat.com/" target="_blank" rel="external">喵神</a>的纠正了多处有问题的地方，thx, have fun!</p>
<p>主要参考自苹果的官方文档《The Swift Programming Language》，可以在<a href="https://developer.apple.com/swift/" target="_blank" rel="external">这里</a>下载到</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://godknow.cn/2016/06/28/swift-zhong-de-yi-chang-pao-chu-he-cuo-wu-chu-li/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="晓东儿">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva4.sinaimg.cn/crop.0.0.511.511.180/72a5a039jw8f9d3gusrs1j20e80e7jrw.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Xiaodong's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Xiaodong's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/28/swift-zhong-de-yi-chang-pao-chu-he-cuo-wu-chu-li/" itemprop="url">
                  Swift 中的异常抛出和错误处理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-28T12:19:24+08:00">
                2016-06-28
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/06/28/swift-zhong-de-yi-chang-pao-chu-he-cuo-wu-chu-li/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/28/swift-zhong-de-yi-chang-pao-chu-he-cuo-wu-chu-li/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Swift语言对其错误处理进行了新的设计，当然了，重新设计后的结果使得该错误处理系统用起来更爽。今天的主题就是系统的搞一下Swift中的错误处理，以及看一下Swift中是如何抛出异常的。在编译型语言中，错误一般分为编译错误和运行时错误。我们平时在代码中处理的错误为运行时错误，我们对异常进行处理的操作的目的是为了防止程序出现错误而导致其他的副作用，比如用户数据未保存等等。</p>
<p>在今天的文章中，先给出主动产生异常的几种情况，然后再给出如何处理被动异常。</p>
<p><strong>一、主动退出程序的几种情况</strong></p>
<p>在Objective-C中，在单元测试时我们会使用断言，断言中条件满足时会产生异常，并打印出相应的断言错误，在Swift中也有几种产生异常的语法。在本篇博客的第一部分就给出这几种方法。</p>
<p><strong>1.Fatal Errors（致命的错误）</strong></p>
<p>使用fatalError()函数可以立即终止你的应用程序，在fatalError()中可以给出终止信息。使用fatalError()函数，会毫无条件的终止你的应用程序，用起来也是比较简单的，就是一个函数的调用。下方这个Demo一目了然呢，在此就不做过多赘述了。</p>
<p><img src="http://files.jb51.net/file_images/article/201602/201602261147512.png" alt="img"></p>
<p><strong>2. Assertions（断言）</strong></p>
<p>在单元测试中是少不了断言的，Swift中的断言和Objective-C的区别不是太大，使用方法也是大同小异。下方就是断言的两种方法，由代码提示可知，在断言中的提示条件是可选的。断言会在Debug模式下起作用，但是在Release版本中就会被忽略。</p>
<p><img src="http://files.jb51.net/file_images/article/201602/201602261147513.png" alt="img"></p>
<p>在assert()函数中, 第一个参数是Bool类型，第二个参数是输出的信息。当条件为true时，断言不执行，相应的断言信息不打印。当条件为false时，断言执行，并且打印相应的断言信息。</p>
<p><img src="http://files.jb51.net/file_images/article/201602/201602261147514.png" alt="img"></p>
<p>assertionFailure()函数只有一个Message参数，并且该参数也是可以省略的，assertionFailure()没有条件。如下所示：</p>
<p><img src="http://files.jb51.net/file_images/article/201602/201602261147515.png" alt="img"></p>
<p><strong>3. 先决条件（Preconditions）</strong></p>
<p>Preconditions的用法和断言一样，不过有一点需要主要，Preconditions在debug和release模式下都会被执行，除非使用–Ounchecked进行编译。下方截图是代码提示给出的Preconditions函数的提示，如下所示：</p>
<p><img src="http://files.jb51.net/file_images/article/201602/201602261147516.png" alt="img"></p>
<p>关于Preconditions的具体用法请参照断言，和断言用法一样，在此就不做过多的赘述了。</p>
<p><strong>二.Swift中的错误处理</strong></p>
<p>在Objective-C中，如果你处理过错误的话，那么你将会对NSError很熟悉。在Swift中，如果你要定义你自己的错误类型，你只需要实现ErrorType协议即可。声明完错误类型后，就可以在处理错误抛出异常时使用自定义的错误类型了。下方将会一步步带你走完Swift中的错误处理的路程。</p>
<p><strong>1.使用枚举创建错误类型</strong></p>
<p>（1）.遵循ErrorType协议，自定义错误类型。下方定义了一个错误类型枚举，该枚举遵循了ErrorType协议，在接下来的代码中我们将会使用这个MyCustomErrorType枚举，错误枚举的实现如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">//定义错误类型</div><div class="line">enum MyCustomErrorType: ErrorType &#123;</div><div class="line">case ErrorReason</div><div class="line">case ErrorReason</div><div class="line">case ErrorReason</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>（2）.在我们的函数定义时可以使用throws关键字，以及在函数中使用throw关键字对错误进行抛出，抛出的错误类型就可以使用上面我们自己定义的错误类型。下方函数就是一个可以抛出错误的函数，抛出的错误就是我们在上面枚举中所定义的类型。具体代码如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">func myThrowFunc() throws &#123;</div><div class="line">let test:Int? = nil</div><div class="line">guard test != nil else &#123;</div><div class="line">throw MyCustomErrorType.ErrorReason</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>（3）.上面函数的功能是对错误进行抛出，接下来就该使用do-catch来处理抛出的错误。使用try对错误进行捕捉，使用do-catch对错误进行处理。具体处理方式如下所示。在下方错误处理中类似于switch-case语句，catch后边可以枚举匹配错误类型，具体如下所示：　　　　</p>
<p><img src="http://files.jb51.net/file_images/article/201602/201602261147517.png" alt="img"></p>
<p>（4）在枚举实现错误类型中我们可以通过值绑定的形式为错误添加错误代码和错误原因。在声明枚举时，我们使用了枚举元素值绑定的特性（关于枚举使用的更多细节请参考之前的博客《窥探Swift之别样的枚举类型》）。在声明枚举成员ErrorState时，我们为其绑定了两个变量，一个是错误代码errorCode, 另一个是错误原因errorReason。这两者可以在抛出错误时为其传入相应的值，如下方代码片段中的throwError函数所示，在抛出错误是为errorCode指定的错误代码为404，为errorReason指定的错误原因是“not found”。</p>
<p>　　最后就是使用do-catch处理异常了，在catch中对绑定的错误代码和错误原因进行了获取，并且通过where子句进行了错误代码的筛选。此处catch的用法与switch-case中获取枚举绑定值的用法是一样的，所以在此就不做过多的赘述。具体实现方式如下代码所示：</p>
<p><img src="http://files.jb51.net/file_images/article/201602/201602261147518.png" alt="img"></p>
<p><strong>2.使用结构体为错误处理添加Reason</strong></p>
<p>在上面的内容中，使用枚举遵循ErrorType协议的方式定义了特定的错误类型。接下来我们将使用结构体来遵循ErrorType协议，为错误类型添加错误原因。也就是说，我们可以在抛出错误时，给自定义错误类型提供错误原因。该功能在开发中是非常常用的，而且用起来也是非常爽的。接下来就看一下如何为我们的错误类型添加错误原因。</p>
<p>（1）使用结构体创建错误类型，下方名为MyErrorType的结构体遵循了ErrorType协议，并且在MyErrorType结构体中，声明了一个reason常量，该reason常量中存储的就是错误原因，具体实现方式如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">struct MyErrorType: ErrorType &#123;</div><div class="line">let reason : String</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>（2）上面定义完错误类型结构体后，在错误抛出中就可以使用了。在错误抛出时，可以传入一个错误原因，具体代码如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">func myThrowFunc() throws &#123;</div><div class="line">let test:Int? = nil</div><div class="line">guard test != nil else &#123;</div><div class="line">throw MyErrorType(reason: &quot;我是详细的错误原因，存储在error中&quot;)</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>（3）最后要对抛出的错误进行do-catch处理，在处理时，可以对错误原因进行打印，错误原因存储在error中，具体操作和打印结果如下所示：　　　　　　</p>
<p><img src="http://files.jb51.net/file_images/article/201602/201602261147519.png" alt="img"></p>
<p>由上面的输出结果可知，error是我们自定义的MyErrorType类型，我们可以使用下面的代码来代替catch中的print语句，如下所示：　　　　</p>
<p><img src="http://files.jb51.net/file_images/article/201602/2016022611475110.png" alt="img"></p>
<p>上面的做法似乎有些麻烦，还有一种简化输出的方法，就是在上述结构体中实现CustomDebugStringConvertible协议，对描述信息进行一个重写，就可以在打印error时，只打印错误信息，下方是重写后的结构体。　　　</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">struct MyErrorType: ErrorType,CustomDebugStringConvertible &#123;</div><div class="line">let reason : String</div><div class="line">var debugDescription: String &#123;</div><div class="line">return &quot;错误类型-----\(self.dynamicType): \(reason)&quot;</div><div class="line">&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>修改后，输出结果如下，直接打印error输出的就是错误信息，而不是MyErrorType类型。</p>
<p><img src="http://files.jb51.net/file_images/article/201602/2016022611475111.png" alt="img"></p>
<p><strong>3.使String类型遵循ErrorType协议，直接使用String提供错误原因</strong></p>
<p>在“2”中，我们使用了结构体遵循ErrorType协议的形式，来为错误提供错误信息的。在接下来的部分，我们将通过更为简单的方式为抛出的错误提供错误信息。这种方式更为简单，也易于理解，具体方式如下方代码所示：　　　　</p>
<p><img src="http://files.jb51.net/file_images/article/201602/2016022611475112.png" alt="img"></p>
<p><strong>三、在错误处理中使用内置关键字</strong></p>
<p><strong>1.初探这些内置关键字</strong></p>
<p>在Swift中提供了一些内置关键字（<strong>FILE</strong>, <strong>FUNCTION</strong>, <strong>LINE</strong>等）来获取上下文信息，在本篇博客的第三部分，将会给出如何在我们的错误处理中使用这些内置关键字。下方就是这些内置关键字的作用，如下所示：</p>
<p><img src="http://files.jb51.net/file_images/article/201602/2016022611475113.png" alt="img"></p>
<p>上面说是内置关键字，其实就是存储代码上下文的宏定义，上方代码段简单的给出了这些内置关键字的作用与用法，在接下来将在ErrorType中使用这些内置关键字，让我们的错误信息更加丰富多彩。　</p>
<p><strong>2.在ErrorType中使用上述内置关键字</strong></p>
<p>如果想在ErrorType中使用这些上下文内置关键字，我们只需要对ErrorType进行扩展，使其在ErrorType提供错误信息时给出出错的上下文信息。当然，这实现起来比较简单，就是在ErrorType中添加了一个扩展方法contextString()。该方法的作用就是提供错误的上下文信息，也就是在出错的地方，调用contextString()方法生成上下文描述信息即可。对ErrorType协议的具体延展实现如下代码段所示.</p>
<p>在下方代码片段中，我们对ErrorType进行了扩展，为ErrorType添加了contextString的函数实现。contextString()函数有三个默认参数，分别是file–当前文件名，function–当前出错的函数名，line–当前抛出异常的行数。上述三个参数都有参数默认值，分别对应着<strong>FILE</strong>, <strong>FUNCTION</strong>, <strong>LINE</strong>。该扩展函数的返回值为这三个参数组成从字符串信息。具体实现如下所示：</p>
<p><img src="http://files.jb51.net/file_images/article/201602/2016022611475214.png" alt="img"></p>
<p><strong>3.使用扩展的contextString方法</strong></p>
<p>上面我们使用结构体实现ErrorType协议的形式，为错误类型添加错误原因。接下来我们将在添加reason的同时，使用contextString()函数添加描述信息。下方CustomErrorType结构体遵循了ErrorType协议，其中添加了一个reason常量来存储错误原因，一个context常量来存储上下文信息，并且为该结构体添加了一个构造函数，在构造函数中初始化和reason常量。具体实现如下所示：　　</p>
<p><img src="http://files.jb51.net/file_images/article/201602/2016022611475215.png" alt="img"></p>
<p><strong>4. 抛出并捕获异常</strong></p>
<p>在下方代码中函数throwError()抛出了异常，该抛出的错误类型是CustomErrorType。在创建CustomErrorType类型实例，也就是err变量时，我们指定了错误原因，也就是为reason赋了一个值。在创建完err实例后，我们又调用延展contextString()函数获取异常的上下文信息，并把返回的内容存储在err实例的context属性中。最后使用throw关键字抛出err实例，如下方第一部分代码所示。</p>
<p>在创建抛出异常的函数后，我们需要对抛出的异常进行捕获。也就是使用try对异常进行捕获，使用do-catch对异常进行处理，具体操作如下方第二段代码所示。</p>
<p>　　　<img src="http://files.jb51.net/file_images/article/201602/2016022611475216.png" alt="img">　</p>
<p><strong>5. 分析打印结果</strong></p>
<p>经过上述步骤如果你在Playground中进行试验的，那么在控制台上你将会看到如下信息。从打印出的信息我们可以看到，信息包括reason：错误原因，和context：异常上下文。在下方的输出结果中，文件名我们可以看到是<expr>这并不是确切的文件名，因为我们是在Playground中使用的，并且不是确切的Swift源文件，所以获取不到确切的文件名。</expr></p>
<p><img src="http://files.jb51.net/file_images/article/201602/2016022611475217.png" alt="img"></p>
<p>为了观察确切的文件名，我们需要在确切的Swift源文件中抛出上述异常。在特定Swift源文件中，我们会看到下方的输出结果。从下方的输出日志中，我们可以清楚的看到文件名是一个详细的文件路径。如下所示：　　　　</p>
<p><img src="http://files.jb51.net/file_images/article/201602/2016022611475218.png" alt="img"></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://godknow.cn/2016/06/28/react-nativexue-xi-bi-ji/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="晓东儿">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva4.sinaimg.cn/crop.0.0.511.511.180/72a5a039jw8f9d3gusrs1j20e80e7jrw.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Xiaodong's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Xiaodong's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/28/react-nativexue-xi-bi-ji/" itemprop="url">
                  React-Native学习笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-28T00:47:14+08:00">
                2016-06-28
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/06/28/react-nativexue-xi-bi-ji/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/28/react-nativexue-xi-bi-ji/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>自己在学习React-Native过程中整理的一份学习指南，包含 教程、开源app和资源网站等，还在不断更新中。欢迎pull requests！</p>
<p>React-Native学习指南</p>
<p>本指南汇集React-Native各类学习资源，给大家提供便利。指南正在不断的更新，大家有好的资源欢迎Pull Requests！</p>
<p>同时还有Awesome React-Native系列</p>
<p><a href="https://github.com/jondot/awesome-react-native" target="_blank" rel="external">https://github.com/jondot/awesome-react-native</a></p>
<p>教程</p>
<p>react-native 官方api文档 <a href="http://facebook.github.io/react-native/docs/getting-started.html" target="_blank" rel="external">http://facebook.github.io/react-native/docs/getting-started.html</a></p>
<p>react-native 中文api文档 (翻译中) <a href="https://github.com/ecomfe/react-native-cn" target="_blank" rel="external">https://github.com/ecomfe/react-native-cn</a></p>
<p>react.js中文文档 <a href="http://reactjs.cn/" target="_blank" rel="external">http://reactjs.cn/</a></p>
<p>react.js入门教程(gitbook) <a href="http://hulufei.gitbooks.io/react-tutorial/content/introduction.html" target="_blank" rel="external">http://hulufei.gitbooks.io/react-tutorial/content/introduction.html</a></p>
<p>react.js快速入门教程 - 阮一峰 <a href="http://www.ruanyifeng.com/blog/2015/03/react.html" target="_blank" rel="external">http://www.ruanyifeng.com/blog/2015/03/react.html</a></p>
<p>react.js视频教程 <a href="http://react.nodejs-china.org/t/reactjszhong-wen-shi-pin-jiao-cheng-bai-du-wang-pan/584" target="_blank" rel="external">http://react.nodejs-china.org/t/reactjszhong-wen-shi-pin-jiao-cheng-bai-du-wang-pan/584</a></p>
<p>react-native第一课 <a href="http://html-js.com/article/2783" target="_blank" rel="external">http://html-js.com/article/2783</a></p>
<p>深入浅出 React Native：使用 JavaScript 构建原生应用 <a href="http://zhuanlan.zhihu.com/FrontendMagazine/19996445" target="_blank" rel="external">http://zhuanlan.zhihu.com/FrontendMagazine/19996445</a></p>
<p>React Native通信机制详解 <a href="http://blog.cnbang.net/tech/2698/" target="_blank" rel="external">http://blog.cnbang.net/tech/2698/</a></p>
<p>React Native布局篇 <a href="http://segmentfault.com/a/1190000002658374" target="_blank" rel="external">http://segmentfault.com/a/1190000002658374</a></p>
<p>React Native 基础练习指北（一） <a href="http://segmentfault.com/a/1190000002645929" target="_blank" rel="external">http://segmentfault.com/a/1190000002645929</a></p>
<p>React Native 基础练习指北（二） <a href="http://segmentfault.com/a/1190000002647733" target="_blank" rel="external">http://segmentfault.com/a/1190000002647733</a></p>
<p>构建一个简单的列表页和2页导航 <a href="http://www.xn--cnq920ntha.cn/archives/235#6838470-tsina-1-17436-6a377b1a66595f9ede646cf5c012734c" target="_blank" rel="external">http://www.xn--cnq920ntha.cn/archives/235#6838470-tsina-1-17436-6a377b1a66595f9ede646cf5c012734c</a></p>
<p>Diary of Building an iOS App with React Native <a href="http://herman.asia/building-a-flashcard-app-with-react-native" target="_blank" rel="external">http://herman.asia/building-a-flashcard-app-with-react-native</a></p>
<p>Use React Native in Existing iOS App <a href="http://blog-en.leapoahead.com/post/use-react-native-in-existing-ios-app" target="_blank" rel="external">http://blog-en.leapoahead.com/post/use-react-native-in-existing-ios-app</a></p>
<p>tcomb-form-native使用视频教程(需翻墙) <a href="http://react.rocks/example/tcomb-form-native" target="_blank" rel="external">http://react.rocks/example/tcomb-form-native</a></p>
<p>开源APP</p>
<p>研究源码也是一个很好的学习方式</p>
<p>官方演示App <a href="https://github.com/facebook/react-native/tree/master/Examples" target="_blank" rel="external">https://github.com/facebook/react-native/tree/master/Examples</a></p>
<p>ReactNativeRubyChina <a href="https://github.com/henter/ReactNativeRubyChina" target="_blank" rel="external">https://github.com/henter/ReactNativeRubyChina</a></p>
<p>HackerNews-React-Native <a href="https://github.com/iSimar/HackerNews-React-Native" target="_blank" rel="external">https://github.com/iSimar/HackerNews-React-Native</a></p>
<p>React-Native新闻客户端 <a href="https://github.com/tabalt/ReactNativeNews" target="_blank" rel="external">https://github.com/tabalt/ReactNativeNews</a></p>
<p>newswatch(新闻客户端) <a href="https://github.com/bradoyler/newswatch-react-native" target="_blank" rel="external">https://github.com/bradoyler/newswatch-react-native</a></p>
<p>buyscreen(购买页面) <a href="https://github.com/appintheair/react-native-buyscreen" target="_blank" rel="external">https://github.com/appintheair/react-native-buyscreen</a></p>
<p>V2EX客户端 <a href="https://github.com/samuel1112/v2er" target="_blank" rel="external">https://github.com/samuel1112/v2er</a></p>
<p>react-native-todo <a href="https://github.com/joemaddalone/react-native-todo" target="_blank" rel="external">https://github.com/joemaddalone/react-native-todo</a></p>
<p>react-native-beer <a href="https://github.com/muratsu/react-native-beer" target="_blank" rel="external">https://github.com/muratsu/react-native-beer</a></p>
<p>react-native-stars <a href="https://github.com/86/react-native-stars" target="_blank" rel="external">https://github.com/86/react-native-stars</a></p>
<p>模仿天猫首页的app <a href="https://github.com/baofen14787/react-native-demo" target="_blank" rel="external">https://github.com/baofen14787/react-native-demo</a></p>
<p>ReactNativeChess <a href="https://github.com/csarsam/ReactNativeChess" target="_blank" rel="external">https://github.com/csarsam/ReactNativeChess</a></p>
<p>react native 编写的音乐软件 <a href="https://github.com/Johnqing/miumiu" target="_blank" rel="external">https://github.com/Johnqing/miumiu</a></p>
<p>react-native-pokedex <a href="https://github.com/ababol/react-native-pokedex" target="_blank" rel="external">https://github.com/ababol/react-native-pokedex</a></p>
<p>CNode-React-Native <a href="https://github.com/SFantasy/CNode-React-Native" target="_blank" rel="external">https://github.com/SFantasy/CNode-React-Native</a></p>
<p>8tracks电台客户端 <a href="https://github.com/voronianski/EightTracksReactNative" target="_blank" rel="external">https://github.com/voronianski/EightTracksReactNative</a></p>
<p>React-Native实现的计算器 <a href="https://github.com/yoxisem544/Calculator-using-React-Native" target="_blank" rel="external">https://github.com/yoxisem544/Calculator-using-React-Native</a></p>
<p>房产搜索app <a href="https://github.com/jawee/react-native-PropertyFinder" target="_blank" rel="external">https://github.com/jawee/react-native-PropertyFinder</a></p>
<p>知乎专栏app <a href="https://github.com/LeezQ/react-native-zhihu-app" target="_blank" rel="external">https://github.com/LeezQ/react-native-zhihu-app</a></p>
<p>ForeignExchangeApp <a href="https://github.com/peralmq/ForeignExchangeApp" target="_blank" rel="external">https://github.com/peralmq/ForeignExchangeApp</a></p>
<p>工具</p>
<p>react-native-snippets(代码提示) <a href="https://github.com/Shrugs/react-native-snippets" target="_blank" rel="external">https://github.com/Shrugs/react-native-snippets</a></p>
<p>react-native-babel(使用ES6+) <a href="https://github.com/roman01la/react-native-babel" target="_blank" rel="external">https://github.com/roman01la/react-native-babel</a></p>
<p>资源网站</p>
<p>React-native官网 <a href="http://facebook.github.io/react-native/" target="_blank" rel="external">http://facebook.github.io/react-native/</a></p>
<p>React-China社区 <a href="http://react-china.org/" target="_blank" rel="external">http://react-china.org/</a></p>
<p>React-native组件库（比较全的组件库） <a href="http://react.parts/" target="_blank" rel="external">http://react.parts/</a></p>
<p>React Native Modules <a href="http://reactnativemodules.com/" target="_blank" rel="external">http://reactnativemodules.com/</a></p>
<p>11款React Native开源移动 UI 组件 <a href="http://www.oschina.net/news/61214/11-react-native-ui-components" target="_blank" rel="external">http://www.oschina.net/news/61214/11-react-native-ui-components</a></p>
<p>业界讨论</p>
<p>谈谈 React Native - 唐巧 <a href="http://blog.devtang.com/blog/2015/02/01/talk-about-react-native/" target="_blank" rel="external">http://blog.devtang.com/blog/2015/02/01/talk-about-react-native/</a></p>
<p>如何评价React-Native? <a href="http://www.zhihu.com/question/27852694/answer/43990708" target="_blank" rel="external">http://www.zhihu.com/question/27852694/answer/43990708</a></p>
<p>React Native概述：背景、规划和风险 <a href="http://div.io/topic/938" target="_blank" rel="external">http://div.io/topic/938</a></p>
<p>指南： <a href="https://github.com/ele828/react-native-guide" target="_blank" rel="external">https://github.com/ele828/react-native-guide</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://godknow.cn/2016/06/26/mac-os-x-jin-cheng-usereventagent-zhan-yong-cpu-100-de-jie-jue-ban-fa/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="晓东儿">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva4.sinaimg.cn/crop.0.0.511.511.180/72a5a039jw8f9d3gusrs1j20e80e7jrw.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Xiaodong's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Xiaodong's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/26/mac-os-x-jin-cheng-usereventagent-zhan-yong-cpu-100-de-jie-jue-ban-fa/" itemprop="url">
                  Mac OS X 进程UserEventAgent 占用CPU 100%的解决办法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-26T22:53:59+08:00">
                2016-06-26
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/06/26/mac-os-x-jin-cheng-usereventagent-zhan-yong-cpu-100-de-jie-jue-ban-fa/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/26/mac-os-x-jin-cheng-usereventagent-zhan-yong-cpu-100-de-jie-jue-ban-fa/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>前几天电脑无故发热特别厉害，达到了70+度，一查进程居然有一个UserEventAgent占了100%的CPU，虽未影响系统流畅度，还是受不了这么高的温度，我也不记得对系统和硬件做过什么大的改动，上网查了一下似乎和USB设备有关，后来一忙又把这事放了几天，今天干脆直接申请了Apple支持，电话连线近一小时仍无果（服务还是不错的），只能提供了一些后续的解决方案。<br>闲不住自己试了几遍，发现只有连接鼠标的时候才会有这个问题（不过这鼠标以前用着一切正常..），点开UserEventAgent进程发现打开的文件里很多在/system/Library/下，没看到和鼠标有关的，直接Finder定位到/System/Library/搜索mouse，出来两个目测和鼠标有关的文件：<br>AppleHIDMouse.kext<br>AppleHIDMouseAgent.plugin </p>
<p>本想直接把这文件移动到其他路径，为求保险再搜了一下上面自己猜测的信息，在Apple的技术支持论坛找到一个和上述一样解决方法的帖子，原来只需要删除下面这一个文件即可：<br><code>/System/Library/UserEventPlugins/AppleHIDMouseAgent.plugin/Contents/MacOS/AppleH IDMouseAgent</code></p>
<p>删除之，重启，终于恢复正常。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://godknow.cn/2016/06/26/bitcode-li-jie/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="晓东儿">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva4.sinaimg.cn/crop.0.0.511.511.180/72a5a039jw8f9d3gusrs1j20e80e7jrw.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Xiaodong's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Xiaodong's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/26/bitcode-li-jie/" itemprop="url">
                  Bitcode 理解
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-26T15:14:20+08:00">
                2016-06-26
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/06/26/bitcode-li-jie/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/26/bitcode-li-jie/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>今天试着用Xcode 7 beta 3在真机(iOS 8.3)上运行一下我们的工程，结果发现工程编译不过。看了下问题，得到的信息是我们引入的一个第三方库不包含bitcode。嗯，不知道bitcode是啥，所以就得先看看这货是啥了。</p>
<p><img src="http://cc.cocimg.com/api/uploads/20150702/1435823658708967.png" alt=""></p>
<p>#Bitcode是什么？</p>
<p>找东西嘛，最先想到的当然是先看官方文档了。在<a href="https://developer.apple.com/library/prerelease/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AppThinning/AppThinning.html#//apple_ref/doc/uid/TP40012582-CH35" target="_blank" rel="external">App Distribution Guide – App Thinning (iOS, watchOS)</a>一节中，找到了下面这样一个定义：</p>
<p>Bitcode is an intermediate representation of a compiled program. Apps you upload to iTunes Connect that contain bitcode will be compiled and linked on the App Store. Including bitcode will allow Apple to re-optimize your app binary in the future without the need to submit a new version of your app to the store.</p>
<p>说的是bitcode是被编译程序的一种中间形式的代码。包含bitcode配置的程序将会在App store上被编译和链接。bitcode允许苹果在后期重新优化我们程序的二进制文件，而不需要我们重新提交一个新的版本到App store上。</p>
<p>嗯，看着挺高级的啊。</p>
<p>继续看，在<a href="https://developer.apple.com/library/prerelease/ios/documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_7_0.html" target="_blank" rel="external">What’s New in Xcode-New Features in Xcode 7</a>中，还有一段如下的描述</p>
<p>Bitcode. When you archive for submission to the App Store, Xcode will compile your app into an intermediate representation. The App Store will then compile the bitcode down into the 64 or 32 bit executables as necessary.</p>
<p>当我们提交程序到App store上时，Xcode会将程序编译为一个中间表现形式(bitcode)。然后App store会再将这个botcode编译为可执行的64位或32位程序。</p>
<p>再看看这两段描述都是放在App Thinning(App瘦身)一节中，可以看出其与包的优化有关了。喵大(@onevcat)在其博客<a href="http://onevcat.com/2015/06/ios9-sdk/" target="_blank" rel="external">开发者所需要知道的 iOS 9 SDK 新特性</a>中也描述了iOS 9中苹果在App瘦身中所做的一些改进，大家可以转场到那去研读一下。</p>
<p>#Bitcode配置</p>
<p>在上面的错误提示中，提到了如何处理我们遇到的问题：</p>
<p>You must rebuild it with bitcode enabled (Xcode setting ENABLE_BITCODE), obtain an updated library from the vendor, or disable bitcode for this target. for architecture arm64</p>
<p>要么让第三方库支持，要么关闭target的bitcode选项。</p>
<p>实际上在Xcode 7中，我们新建一个iOS程序时，bitcode选项默认是设置为YES的。我们可以在”Build Settings”-&gt;”Enable Bitcode”选项中看到这个设置。</p>
<p>不过，我们现在需要考虑的是三个平台：iOS，Mac OS，watchOS。</p>
<ul>
<li>对应iOS，bitcode是可选的。</li>
<li>对于watchOS，bitcode是必须的。</li>
<li>Mac OS不支持bitcode。</li>
</ul>
<p>如果我们开启了bitcode，在提交包时，下面这个界面也会有个bitcode选项：</p>
<p><img src="http://cc.cocimg.com/api/uploads/20150817/1439791780516322.png" alt="blob.png"></p>
<p>盗图，我的应用没办法在这个界面显示bitcode，因为依赖于第三方的库，而这个库不支持bitcode，暂时只能设置ENABLE_BITCODE为NO。</p>
<p>所以，如果我们的工程需要支持bitcode，则必要要求所有的引入的第三方库都支持bitcode。我就只能等着公司那些大哥大姐们啥时候提供一个新包给我们了。</p>
<p>##题外话</p>
<p>如上面所说，bitcode是一种中间代码。LLVM官方文档有介绍这种文件的格式，有兴趣的可以移步<a href="http://llvm.org/docs/BitCodeFormat.html#llvm-bitcode-file-format" target="_blank" rel="external">LLVM Bitcode File Format</a>。</p>
<p>###参考</p>
<ul>
<li><a href="https://developer.apple.com/library/prerelease/ios/documentation/IDEs/Conceptual/AppDistributionGuide/AppThinning/AppThinning.html#//apple_ref/doc/uid/TP40012582-CH35" target="_blank" rel="external">App Distribution Guide – App Thinning (iOS, watchOS)</a></li>
<li><a href="https://developer.apple.com/library/prerelease/ios/documentation/DeveloperTools/Conceptual/WhatsNewXcode/Articles/xcode_7_0.html" target="_blank" rel="external">What’s New in Xcode-New Features in Xcode 7</a></li>
<li><a href="http://onevcat.com/2015/06/ios9-sdk/" target="_blank" rel="external">开发者所需要知道的 iOS 9 SDK 新特性</a></li>
<li><a href="http://llvm.org/docs/BitCodeFormat.html#llvm-bitcode-file-format" target="_blank" rel="external">LLVM Bitcode File Format</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://godknow.cn/2016/06/26/bilibilikai-yuan-kuang-jia-ijkplayer/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="晓东儿">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="http://tva4.sinaimg.cn/crop.0.0.511.511.180/72a5a039jw8f9d3gusrs1j20e80e7jrw.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Xiaodong's Blog">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Xiaodong's Blog" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/06/26/bilibilikai-yuan-kuang-jia-ijkplayer/" itemprop="url">
                  Bilibili开源框架ijkplayer
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-06-26T09:47:59+08:00">
                2016-06-26
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2016/06/26/bilibilikai-yuan-kuang-jia-ijkplayer/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/06/26/bilibilikai-yuan-kuang-jia-ijkplayer/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ijkplayer 是一款做视频直播的框架, 基于ffmpeg, 支持 Android 和 iOS, 网上也有很多集成说明, 但是个人觉得还是不够详细, 在这里详细的讲一下在 iOS 中如何集成ijkplayer, 即便以前从没有接触过, 按着下面做也可以集成成功!</p>
<h5 id="一-下载ijkplayer"><a href="#一-下载ijkplayer" class="headerlink" title="一. 下载ijkplayer"></a>一. 下载ijkplayer</h5><p>ijkplayer下载地址:<a href="https://github.com/Bilibili/ijkplayer" target="_blank" rel="external">https://github.com/Bilibili/ijkplayer</a></p>
<p>ijkplayer下载地址:<a href="https://github.com/Bilibili/ijkplayer" target="_blank" rel="external">https://github.com/Bilibili/ijkplayer</a><br>下载完成后解压</p>
<h5 id="二-编译-ijkplayer"><a href="#二-编译-ijkplayer" class="headerlink" title="二. 编译 ijkplayer"></a>二. 编译 ijkplayer</h5><p>说是编译 ijkplayer, 其实是编译 ffmpeg, 在这里我们已经下载好了<code>ijkplayer</code>, 所以 github 上<code>README.md</code>中的<code>Build iOS</code>那一步中有一些步骤是不需要的.</p>
<p>说是编译 ijkplayer, 其实是编译 ffmpeg, 在这里我们已经下载好了<code>ijkplayer</code>, 所以 github 上<code>README.md</code>中的<code>Build iOS</code>那一步中有一些步骤是不需要的.<br>下面开始一步一步编译:</p>
<p>说是编译 ijkplayer, 其实是编译 ffmpeg, 在这里我们已经下载好了<code>ijkplayer</code>, 所以 github 上<code>README.md</code>中的<code>Build iOS</code>那一步中有一些步骤是不需要的.<br>下面开始一步一步编译:<br>1.打开终端, cd 到<code>jkplayer-master</code>文件夹中, 也就是下载完解压后的文件夹</p>
<p>2.执行命令行<code>./init-ios.sh</code>, 这一步是去下载 ffmpeg 的, 时间会久一点, 耐心等一下.如下图:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1803339-96d2217e323aab4b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img"></p>
<p>3.在第2步中下载完成后, 执行<code>cd ios</code>, 也就是进入到 ios目录中</p>
<p>4.进入 ios 文件夹后, 在终端依次执行<code>./compile-ffmpeg.sh clean</code>和<code>./compile-ffmpeg.sh all</code>命令, 编译 ffmpeg, 也就是<code>README.md</code>中这两步<br><em>编译时间较久, 耐心等待一下.</em></p>
<h6 id="三-打包IJKMediaFramework-framework框架"><a href="#三-打包IJKMediaFramework-framework框架" class="headerlink" title="三. 打包IJKMediaFramework.framework框架"></a>三. 打包<code>IJKMediaFramework.framework</code>框架</h6><p>集成 ijkplayer 有两种方法:</p>
<p>集成 ijkplayer 有两种方法:<br>一种方法是按照<code>IJKMediaDemo</code>工程中那样, 直接导入工程<code>IJKMediaPlayer.xcodeproj</code>, 在这里不做介绍</p>
<p>第二种集成方法是把 ijkplayer 打包成<code>framework</code>导入工程中使用. 下面开始介绍如何打包<code>IJKMediaFramework.framework</code></p>
<ol>
<li>首先打开工程<code>IJKMediaPlayer.xcodeproj</code>, 位置如下图:</li>
</ol>
<p><img src="http://upload-images.jianshu.io/upload_images/1803339-607cc84c212faf90.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img"></p>
<p>2.工程打开后设置工程的 scheme</p>
<p>3.设置好 scheme 后, 分别选择真机和模拟器进行编译, 编译完成后, 进入 Finder, 如下图:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/1803339-344cda905745ff39.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="img"></p>
<p>进入 Finder 后, 可以看到有真机和模拟器两个版本的编译结果</p>
<p>下面开始合并真机和模拟器版本的 framework, 注意不要合并错了<br>打开终端, 进行合并, 命令行具体格式为:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lipo -create &quot;真机版本路径&quot; &quot;模拟器版本路径&quot; -output &quot;合并后的文件路径&quot;</div></pre></td></tr></table></figure>
<p>下面很重要, 需要用合并后的<code>IJKMediaFramework</code>把原来的<code>IJKMediaFramework</code>替换掉<br>上图中的1、2两步完成后, 绿色框住的那个<code>IJKMediaFramework.framework</code>文件就是我们需要的框架了, 可以复制出来, 稍后我们需要导入工程使用.</p>
<h5 id="四-iOS工程中集成ijkplayer"><a href="#四-iOS工程中集成ijkplayer" class="headerlink" title="四. iOS工程中集成ijkplayer"></a>四. iOS工程中集成ijkplayer</h5><p>新建工程, 导入合并后的<code>IJKMediaFramework.framework</code>以及相关依赖框架以及相关依赖框架<br>导入框架后, 在<code>ViewController.m</code>进行测试, 首先导入<code>IJKMediaFramework.h</code>头文件, 编译看有没有错, 如果没有错说明集成成功.</p>
<p>导入框架后, 在<code>ViewController.m</code>进行测试, 首先导入<code>IJKMediaFramework.h</code>头文件, 编译看有没有错, 如果没有错说明集成成功.<br>接着开始在<code>ViewController.m</code>文件中使用<code>IJKMediaFramework</code>框架进行测试使用, 写一个简单的直播视频进行测试, 在这里看一下运行后的结果, 后面会放上 Demo 供下载.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://tva4.sinaimg.cn/crop.0.0.511.511.180/72a5a039jw8f9d3gusrs1j20e80e7jrw.jpg"
               alt="晓东儿" />
          <p class="site-author-name" itemprop="name">晓东儿</p>
          <p class="site-description motion-element" itemprop="description">喜欢代码，喜欢设计</p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">28</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">11</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/Gh0stKnow" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://twitter.com/kidteaing" target="_blank" title="Twitter">
                  
                    <i class="fa fa-fw fa-twitter"></i>
                  
                  Twitter
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/lllld" target="_blank" title="微博">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  微博
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.zhihu.com/people/kidteaing" target="_blank" title="知乎">
                  
                    <i class="fa fa-fw fa-gittip"></i>
                  
                  知乎
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2014 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">晓东儿</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"ghostknow"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
      
      <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
      <script src="/js/src/hook-duoshuo.js?v=5.1.0"></script>
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  










  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

  


</body>
</html>
